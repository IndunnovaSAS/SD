{% extends "base/base.html" %}

{% block title %}{{ user_obj.get_full_name }} - SD LMS{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center gap-2 text-sm breadcrumbs mb-4">
                <ul>
                    <li><a href="{% url 'accounts:dashboard' %}">Dashboard</a></li>
                    <li><a href="{% url 'accounts:user_list' %}">Usuarios</a></li>
                    <li>{{ user_obj.get_full_name }}</li>
                </ul>
            </div>
            <div class="flex items-center justify-between">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Detalles del Usuario</h1>
                <div class="flex gap-2">
                    <a href="{% url 'accounts:user_edit' user_obj.pk %}" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                        </svg>
                        Editar
                    </a>
                    <form method="post" action="{% url 'accounts:admin_reset_password' user_obj.pk %}" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning btn-sm"
                                onclick="return confirm('&iquest;Restablecer la contrase&ntilde;a de este usuario a la contrase&ntilde;a parametrizada?')">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                            </svg>
                            Restablecer Contrase&ntilde;a
                        </button>
                    </form>
                    <form method="post" action="{% url 'accounts:user_toggle_status' user_obj.pk %}" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="btn {% if user_obj.is_active %}btn-error{% else %}btn-success{% endif %} btn-sm"
                                onclick="return confirm('¿Está seguro de {% if user_obj.is_active %}desactivar{% else %}activar{% endif %} este usuario?')">
                            {% if user_obj.is_active %}
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z" clip-rule="evenodd" />
                            </svg>
                            Desactivar
                            {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            Activar
                            {% endif %}
                        </button>
                    </form>
                </div>
            </div>
        </div>

        {% include "accounts/partials/user_detail.html" %}
    </div>
</div>
{% endblock %}
