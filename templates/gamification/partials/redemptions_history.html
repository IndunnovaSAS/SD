<div class="card bg-base-100 shadow">
    <div class="card-body">
        <h3 class="card-title">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Historial de Canjes
        </h3>
        <div class="overflow-x-auto">
            <table class="table">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Recompensa</th>
                        <th>Puntos</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    {% for redemption in redemptions %}
                    <tr class="hover">
                        <td>{{ redemption.redeemed_at|date:"d/m/Y" }}</td>
                        <td class="font-medium">{{ redemption.reward.name }}</td>
                        <td>
                            <span class="text-error font-medium">-{{ redemption.points_spent }}</span>
                        </td>
                        <td>
                            {% if redemption.status == 'fulfilled' %}
                            <span class="badge badge-success">{{ redemption.get_status_display }}</span>
                            {% elif redemption.status == 'approved' %}
                            <span class="badge badge-info">{{ redemption.get_status_display }}</span>
                            {% elif redemption.status == 'pending' %}
                            <span class="badge badge-warning">{{ redemption.get_status_display }}</span>
                            {% elif redemption.status == 'rejected' %}
                            <span class="badge badge-error">{{ redemption.get_status_display }}</span>
                            {% else %}
                            <span class="badge badge-ghost">{{ redemption.get_status_display }}</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center py-8">
                            <svg class="w-12 h-12 mx-auto text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <p class="text-base-content/60">No hay canjes registrados</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
